<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>CSCI2720</title>
    
    <style>
    #myInput {
      background-image: url('/css/searchicon.png'); /* Add a search icon to input */
      background-position: 10px 12px; /* Position the search icon */
      background-repeat: no-repeat; /* Do not repeat the icon image */
      width: 100%; /* Full-width */
      font-size: 16px; /* Increase font-size */
      padding: 12px 20px 12px 40px; /* Add some padding */
      border: 1px solid #ddd; /* Add a grey border */
      margin-bottom: 12px; /* Add some space below the input */
    }

    #myTable {
      border-collapse: collapse; /* Collapse borders */
      width: 100%; /* Full-width */
      border: 1px solid #ddd; /* Add a grey border */
      font-size: 18px; /* Increase font-size */
    }

    #myTable th, #myTable td {
      text-align: left; /* Left-align text */
      padding: 12px; /* Add padding */
    }

    #myTable tr {
      /* Add a bottom border to all table rows */
      border-bottom: 1px solid #ddd;
    }

    #myTable tr.header, #myTable tr:hover {
      /* Add a grey background color to the table header and on hover */
      background-color: #f1f1f1;
    }
      
    #username {
      left: 0;
      top: 0;
      position: sticky;
    }

    .rate {
      float: left;
      height: 46px;
      padding: 0 10px;
    }

    .rate:not(:checked) > input {
      position:absolute;
      top:-9999px;
    }

    .rate:not(:checked) > label {
      float:right;
      width:1em;
      overflow:hidden;
      white-space:nowrap;
      font-size:30px;
      color:#ccc;
    }

    .rate:not(:checked) > label:before {
      content: 'â˜… ';
    }

    .rate > input:checked ~ label {
      color: #a6ff00;    
  }
    </style>
  
    <!--feel free to move this script to js file because idk which js file-->
    <script>
    let k = 2; //show up indicator

    function showup() { //show logout
      k++;
      var x = document.getElementById('logout');
      if(k%2 == 1){
          x.style.display = 'block';
      }
      else if(k%2 == 0){
          x.style.display = 'none';
      }
    }
    
    function searchLocation() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("myInput");
      filter = input.value.toUpperCase();
      table = document.getElementById("myTable");
      tr = table.getElementsByTagName("tr");

      // Loop through all table rows, and hide those who don't match the search query
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[0];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    }
    
    //idk fetch to which url
    //load location when click it
    function Load(){
        console.log("hi");
        fetch('http://localhost:3000/lo' + document.getElementById('loc1').value, {
              method: 'GET',
        })
        .then(res => res.text())
        .then(res => {
              console.log(res)
              document.getElementById('showLoc').value = JSON.parse(res);
        })

    }
    
    function sortTable() {
      var table, rows, switching, i, x, y, shouldSwitch;
      table = document.getElementById("myTable");
      switching = true;
        
      // Make a loop that will continue until no switching has been done://
      while (switching) {
        //start by saying: no switching is done:
        switching = false;
        rows = table.rows;
        
        // Loop through all table rows (except the first, which contains table headers)://
        for (i = 1; i < (rows.length - 1); i++) {
          //start by saying there should be no switching:
          shouldSwitch = false;
          
          //Get the two elements you want to compare, one from current row and one from the next://
          x = rows[i].getElementsByTagName("TD")[1];
          y = rows[i + 1].getElementsByTagName("TD")[1];
          
          //check if the two rows should switch place:
          if (Number(x.innerHTML) > Number(y.innerHTML)) {
            //if so, mark as a switch and break the loop:
            shouldSwitch = true;
            break;
          }
        }
        if (shouldSwitch) {
          /*If a switch has been marked, make the switch
          and mark that a switch has been done:*/
          rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
          switching = true;
        }
      }     
    }  
      
    //idk fetch to which url
    //Get the username in the top left/right of screen
    function Getusername() {
      fetch('http://localhost:3000/lo' + document.getElementById('loc1').value, {
            method: 'GET',
      })
      .then(res => res.text())
      .then(res => {
            console.log(res)
            document.getElementById('username').value = JSON.parse(res).username
      })
    }
          
    // API action: Initialize and add the map
    function initMap() {
  
            // The location of Geeksforgeeks office
            const gfg_office = {
                lat: 28.50231,
                lng: 77.40548
            };
  
            // Create the map, centered at gfg_office
            const map = new google.maps.Map(
                    document.getElementById("map"), {
  
                // Set the zoom of the map
                zoom: 17.56,
                center: gfg_office,
            });
     }
    </script>
    
    <!--copy from https://developers.google.com/maps/documentation/embed/get-started, idk if it is useful-->
    <!--<iframe
      width="600"
      height="450"
      style="border:0"
      loading="lazy"
      allowfullscreen
      referrerpolicy="no-referrer-when-downgrade"
      src="https://www.google.com/maps/embed/v1/place?key=API_KEY //need to generate a key, but i fail
        &q=Space+Needle,Seattle+WA">
    </iframe>-->
    
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
    
    <!--logout, not done-->
    <button id="username" onclick="showup()">username</button>
        <button class="collapse" id="logout" onclick="logout()">logout</button>
    
    <!--The div element for the API map -->
    <div id="map"></div>
    
    <!--search loc-->
    <input type="text" id="myInput" onkeyup="searchLocation()" placeholder="Search for Locations..">

    <!--List and sort all locations in a table as links to single locations-->
    
    <p><button onclick="sortTable()">Sort</button></p>
    
    <table id="myTable">
      <tr class="header">
        <th style="width:60%;">Location</th>
        <th style="width:30%;">Event</th>
        <th style="width:10%;">Favourite Location</th>
      </tr>
      <tr id="loc1" onclick= "Load()">
        <td>loc1</td>
        <td>3</td>
        <td>
          <div class="rate">
            <input type="checkbox" id="star1" name="rate" value="1" />
            <label for="star1" title="text">1 star</label>
          </div>
        </td>
      </tr>
      <tr id="loc2" onclick= "Load()">
        <td>loc2</td>
        <td>10</td>
        <td>
          <div class="rate">
            <input type="checkbox" id="star2" name="rate" value="2" />
            <label for="star2" title="text">1 star</label>
          </div>
        </td>
      </tr>
      <tr id="loc3" onclick= "Load()">
        <td>loc3</td>
        <td>20</td>
        <td>
          <div class="rate">
            <input type="checkbox" id="star3" name="rate" value="3" />
            <label for="star3" title="text">1 star</label>
          </div>
        </td>
      </tr>
      <tr id="loc4" onclick= "Load()">
        <td>loc4</td>
        <td>15</td>
        <td>
          <div class="rate">
            <input type="checkbox" id="star4" name="rate" value="4" />
            <label for="star4" title="text">1 star</label>
          </div>
        </td>
      </tr>
    </table>
    <div id= "showLoc"></div>
  </body>
</html>
<!--test-->
